<html>
<meta charset="utf-8">
<head>
<meta name="viewport" content="width=800px, user-scalable=1">
<link href='http://fonts.googleapis.com/css?family=Ubuntu:300,400,500,700,300italic,400italic,500italic,700italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
<script src="//static-01.slow/scripts/jquery-1.11.1.min.js" type="text/javascript"></script>
<script src="//static-01.slow/scripts/bowser.js" type="text/javascript"></script>
<script type="text/javascript">
console.log(bowser)
console.log(navigator.platform)
function getQueryVariable(variable)
{
  var query = window.location.search.substring(1);
  var vars = query.split("&");
  for (var i=0;i<vars.length;i++) {
    var pair = vars[i].split("=");
    if(pair[0] == variable){return pair[1];}
  }
  return(false);
}
$(document).ready(function() {
    $("#after-downloading").hide()
    updateLink(true);
    updateCertificateLink();
})

function showContinue() {
    $("#before-downloading").fadeOut(500, function() {
        $("#after-downloading").fadeIn(300);    
    });
}

function updateCertificateLink() {
    //$(".certificate").prop("href", "#")
    $(".certificate").click(function() {
        showContinue();
        //return false;
    })
}

function updateTrust(checked) {
    console.log(checked)
    updateLink(true)
}

function updateLink(trust) {
    href = getQueryVariable("r")
    href = href ? href : "http://cafe.slow/about"
    if(trust) {
        if (href.indexOf("?") > 0) {
            // Query string already exists
            href += "&trust_the_cafe=1"
        }
        else {
            href += "?trust_the_cafe=1"
        }
    }
    $("#continue").prop("href", href)
}

</script>
<link href="style.css" rel="stylesheet" type="text/css">
</head>
<body>
<div id="content">
<div id="content-inner">
    <h1>Your Internet connection will be <em>encrypted</em>.</h1>
    <p>
    Whenever you see that little lock icon on your toolbar or a URL that starts with <em>https://</em>, you should be in good hands.
    </p>
    <p>
    Good for you! No one between you and the web server on the other side of the 'net should be able to see what information you are sending.
    </p>
    
    <p>
    BUT the <a href="http://cafe.slow/about">Slow Internet Café</a> works by looking at and changing the contents of the web sites you view. Encryption prevents that. Normally that's a good thing. Except now your encryption is getting in the way of our fun!
    </p>
    <p>
    If you want to fully enjoy the Café and you do trust us, please let your web browser know by clicking below to download a <a href="slow-internet-cafe-ca-cert.pem" class="certificate">security certificate</a>. This certificate isn't a computer program; it's more like a secret handshake or a friendship bracelet and just lets your computer know that we're buddies. It also lets us re-encrypt your connection again before it goes across the wild Internet, so we'll be the only ones with this special access.
    </p>
    <div id="download-box">
        <div id="before-downloading">
            <p>
            <a href="slow-internet-cafe-ca-cert.pem" class="certificate"><img class="center" style="width: 150px; margin-bottom: 0;" src="trust-us.png" />
            <img class="center" style="width: 150px; margin-top: 0;" src="ssl-added-removed-here.png" />
            </a>
            </p>
        </div>
        <div id="after-downloading">
            <div id="installation-instructions">
            <p>
            <img class="center" style="width: 100px; margin-top: 0;" src="smile.png" />
            Thanks for downloading! Now <em>open the certificate file</em> you just downloaded if it didn't automatically open. Then make sure you select the options to TRUST the certificate before you...
            </p>
            </div>
            <p style="text-align: center">
            --> <a id="continue" href="#">continue on to your original destination</a>. <--
            </p>
            <p style="font-size: 75%; text-align: center;"><label><input type="checkbox" CHECKED name="trust" id="trust-check" onchange="updateTrust(this.checked)">Don't show me this again. I've installed the certificate and trust the Slow Internet Cafe!</label>
            </p>
            <p style="font-size: 75%; text-align: center;">
                If that didn't work, try the version for: <a href="windows">Windows</a> | <a href="MAc">Apple</a> | <a href="android">Android</a> | <a href="other">Other</a>
            </p>
        </div>
    </div>
    <p class="fineprint">
    *** To be honest, this is pretty much the same trick as one that the United States' NSA uses to spy on Internet users around the world. The difference is that they do it without telling anyone while we want to get your <em>consent</em> before doing this, and we're not interested in using your data against you or selling it to advertisers. But to be clear: we will be able to see everything you read and write as long as you're connected to our network. We will totally invade your privacy, but only if you want us to.
    </p>
    <p class="fineprint">
    When it comes down to it, the whole Internet works on trust. A lot of times that trust is broken. Many times you don't even know who you're trusting, really. You just send out your pics and tweets and bank account and whatever and hope it gets safely to the other side and back without any funny business happening in between. For the most part, trusting strangers just seems to work. But at the Slow Internet Cafe you can come talk to us in person or <a href="mailto:director@slowerinternet.com">send us an e-mail</a> if you have questions about our intentions. Is this any better than what the other guys have to offer? That's for you to decide.
    </p>

</div>
</div>
</body>
</html>

